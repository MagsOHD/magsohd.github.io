<!DOCTYPE html>
<html>
<head>
    <title>Test ntfy.sh</title>
    <style>
        body { font-family: monospace; background: #0a0a0a; color: #00fff9; padding: 20px; }
        button { background: transparent; border: 2px solid #00fff9; color: #00fff9; padding: 10px 20px; margin: 10px; cursor: pointer; }
        button:hover { background: #00fff9; color: #0a0a0a; }
        .status { margin: 20px 0; padding: 15px; border: 1px solid #00fff9; }
        .success { color: #39ff14; }
        .error { color: #ff6b00; }
    </style>
</head>
<body>
    <h1>üîî Test Rapide ntfy.sh</h1>

    <button onclick="testConfig()">üîë Tester Configuration</button>
    <button onclick="testEmail()">üîî Tester Notification</button>

    <div id="status" class="status">
        Cliquez sur un bouton pour tester...
    </div>

    <script src="ntfy-config.js"></script>
    <script src="emailService.js"></script>
    <script>
        function updateStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.innerHTML = message;
            status.className = `status ${type}`;
        }

        function testConfig() {
            updateStatus('üîç Test de la configuration...', 'info');

            if (window.NTFY_TOPIC && window.NTFY_TOPIC !== 'YOUR_NTFY_TOPIC') {
                updateStatus(`‚úÖ Topic ntfy.sh configur√©: ${window.NTFY_TOPIC}`, 'success');
            } else {
                updateStatus('‚ùå Topic ntfy.sh non configur√© (placeholder d√©tect√©)', 'error');
            }
        }

        async function testEmail() {
            updateStatus('üîî Test d\'envoi de notification...', 'info');

            try {
                if (!window.emailService) {
                    throw new Error('EmailService non disponible');
                }

                const result = await window.emailService.testEmailSending();

                if (result.success) {
                    updateStatus('‚úÖ Email de test envoy√© avec succ√®s!', 'success');
                } else {
                    updateStatus(`‚ùå √âchec envoi: ${result.error}`, 'error');
                }
            } catch (error) {
                updateStatus(`‚ùå Erreur: ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html>